<div class="container-fluid p-0">
  <div id="filters">

    <!-- Static Filters -->
    <div class="filter">
      <div><i class="fa-solid fa-fire"></i></div>
      <p>Trending</p>
    </div>

    <div class="filter">
      <div><i class="fa-solid fa-city"></i></div>
      <p>Iconic Cities</p>
    </div>

    <!-- Category Filters -->
    <a class="filter <%= (typeof category !== 'undefined' && category === 'Rooms') ? 'active' : '' %>" href="/listings/category/Rooms">
      <div><i class="fa-solid fa-bed"></i></div>
      <p>Rooms</p>
    </a>

    <a class="filter <%= (typeof category !== 'undefined' && category === 'Mountains') ? 'active' : '' %>" href="/listings/category/Mountains">
      <div><i class="fa-solid fa-mountain-city"></i></div>
      <p>Mountains</p>
    </a>

    <a class="filter <%= (typeof category !== 'undefined' && category === 'Castles') ? 'active' : '' %>" href="/listings/category/Castles">
      <div><i class="fa-brands fa-fort-awesome"></i></div>
      <p>Castles</p>
    </a>

    <a class="filter <%= (typeof category !== 'undefined' && category === 'Beaches') ? 'active' : '' %>" href="/listings/category/Beaches">
      <div><i class="fa-solid fa-umbrella-beach"></i></div>
      <p>Beaches</p>
    </a>

    <a class="filter <%= (typeof category !== 'undefined' && category === 'Awesome Pools') ? 'active' : '' %>" href="/listings/category/Awesome%20Pools">
      <div><i class="fa-solid fa-person-swimming"></i></div>
      <p>Awesome Pools</p>
    </a>

    <a class="filter <%= (typeof category !== 'undefined' && category === 'Camping') ? 'active' : '' %>" href="/listings/category/Camping">
      <div><i class="fa-solid fa-campground"></i></div>
      <p>Camping</p>
    </a>

    <a class="filter <%= (typeof category !== 'undefined' && category === 'Arctic') ? 'active' : '' %>" href="/listings/category/Arctic">
      <div><i class="fa-regular fa-snowflake"></i></div>
      <p>Arctic</p>
    </a>

    <!-- Tax Toggle -->
    <div class="tax-toggle">
      <div class="form-check-reverse form-switch">
        <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault"
               <%= showTax ? "checked" : "" %>>
        <label class="form-check-label" for="switchCheckDefault">Display total after taxes</label>
      </div>
    </div>

  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const taxSwitch = document.getElementById("switchCheckDefault");
  if (!taxSwitch) return;

  document.querySelectorAll(".tax-info").forEach(info => {
    info.style.display = taxSwitch.checked ? "inline" : "none";
  });

  taxSwitch.addEventListener("change", async () => {
    const isChecked = taxSwitch.checked;

    document.querySelectorAll(".tax-info").forEach(info => {
      info.style.display = isChecked ? "inline" : "none";
    });

    await fetch("/session/tax-toggle", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ showTax: isChecked })
    });
  });
});
</script>

